(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2261],{80996:function(e,r,t){"use strict";t.d(r,{l4:function(){return F},sm:function(){return useDownloadData},Lz:function(){return useSetSupportSessionCode},KO:function(){return useSupportSessionCode}});var n,o=t(59499),i=t(67294),s=t(49038),u=t(45237),a=t(76487),c=t(50029),l=t(87794),p=t.n(l),d=t(42238),m=t.n(d),f=t(11226),b=t(2139),S=t(21777),h=t(68686),_=[].concat(["win","mac"],["iOS","Android"]),w="BLOCK",hooks_useGetSosLaunchUrl=function(e){var r,t,n=(0,i.useState)(""),o=n[0],s=n[1],u=(0,i.useState)(""),a=u[0],l=u[1],d=void 0!==(t="Windows"===(r=new(m())().getOS().name)?"win":"Mac OS"===r?"mac":r)&&_.includes(t)?t:"win",g="iOS"===d||"Android"===d;return(0,i.useEffect)(function(){function _getMobileUrl(){return(_getMobileUrl=(0,c.Z)(p().mark(function _callee(e,r){var t,n;return p().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,t=(0,S.u)(),o.next=4,(0,b.H)(e,r);case 4:n=o.sent.category,s((0,h.r_)(e,n,t)),o.next=15;break;case 11:o.prev=11,o.t0=o.catch(0),console.error(o.t0),l(w);case 15:case"end":return o.stop()}},_callee,null,[[0,11]])}))).apply(this,arguments)}function _getDesktopUrl(){return(_getDesktopUrl=(0,c.Z)(p().mark(function _callee2(e,r){var t,n,o,i,u;return p().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,b.H)(e,r);case 3:if(n=(t=a.sent).can_build,o=t.cache_url,i=t.cache_ok_url,!(!(u=t.backup_url)||!i||!o)){a.next=11;break}return l(w),a.abrupt("return");case 11:if(n){a.next=14;break}return u?s(u):l(w),a.abrupt("return");case 14:return a.next=16,(0,f.M6)(i);case 16:s(a.sent?o:u),a.next=24;break;case 20:a.prev=20,a.t0=a.catch(0),console.error(a.t0),l(w);case 24:case"end":return a.stop()}},_callee2,null,[[0,20]])}))).apply(this,arguments)}g?function(e,r){return _getMobileUrl.apply(this,arguments)}(e,d):function(e,r){return _getDesktopUrl.apply(this,arguments)}(e,d)},[g,d,e]),{downloadUrl:o,error:a}},g=t(88767),v=t(23757),useCreatePinCode=function(e){var r=e.supportSessionCode,t=(0,g.useQuery)(["supportForm","supportSessionCode",r],function(){return(0,v.wk)(r)},{enabled:!!r}),n=t.isFetching,o=t.data,i=t.isError;return{retryCreatePinCode:t.refetch,isCreatingPinCode:n,pinCodeData:o,isCreatingPinCodeError:i}},y=t(90701),O=(0,u.rw)(""),useSupportSessionCode=function(){return(0,s.Dv)(O)},useSetSupportSessionCode=function(){return(0,s.b9)(O)},F="https://",P=a.fl.getParameter("host"),C=(n={},(0,o.Z)(n,y.J.SPLASHTOP_CLASSIC,"webform"),(0,o.Z)(n,y.J.HIDE_SPLASHTOP_BRAND,"generic-webform"),n),useDownloadData=function(e){var r,t=e.downloadPageKind,n=e.supportSessionCode,o=useCreatePinCode({supportSessionCode:n}),s=o.retryCreatePinCode,u=o.isCreatingPinCode,a=o.pinCodeData,c=hooks_useGetSosLaunchUrl(n),l=c.downloadUrl,p=c.error,d="".concat(F).concat((null==a?void 0:a.pin_fqdn)||""),m=(0,i.useCallback)(function(){s()},[s]);return{expiredDate:a?new Date(a.expires_at.replace(" ","T")+"Z"):void 0,helpUrl:d,isCreatingPinCode:u,isLoadingGetAppLink:!l,isDisableGetAppButton:!!p,linkForCopy:"".concat(P,"/service_desk/").concat(C[t],"/").concat(n),downloadUrl:l,pinCode:(r=(null==a?void 0:a.pin_code)||"","".concat(r.substring(0,3)," ").concat(r.substring(3))),refreshPinCode:m}}},16974:function(e,r,t){"use strict";t.d(r,{W:function(){return useFillForm}});var n=t(59499),o=t(50029),i=t(87794),s=t.n(i),u=t(87536),a=t(62670),c=t(88767),l=t(28626),p=t(80996),d=t(23757),useSubmitForm=function(e){var r,t=e.supportFormId,n=(0,p.Lz)(),i=(0,l.FeC)().flashMessage,u=(0,a.$G)().t,m=(0,c.useMutation)((r=(0,o.Z)(s().mark(function _callee(e){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,d.Ry)(t,e));case 1:case"end":return r.stop()}},_callee)})),function(e){return r.apply(this,arguments)}),{onSuccess:function(e){n(e.support_session_code)},onError:function(e){40416===e.statusCode&&"exceed_max_support_session_number_of_webform"===e.errorReason.error&&i({title:u("support-forms:recentlySubmitted"),variant:"error"})}}),f=m.mutateAsync,b=m.isLoading,S=m.error,h=m.isSuccess,_=m.reset,w=null==S?void 0:S.statusCode,g=null==S?void 0:S.errorReason.error;return{submitForm:f,isSubmittingForm:b,isSubmitSuccess:h,isSubmissionUnsuccessful:40404===w||40422===w||40416===w&&"not_allowed_to_do_this"===g,isReachMaxSession:40409===w&&"exceed_number_limit"===g,resetSubmitForm:_}},m=t(28320);function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var useFillForm=function(e){var r=e.supportFormId,t=e.formFields,n=useSubmitForm({supportFormId:r}),i=n.submitForm,a=n.isSubmittingForm,c=n.isSubmitSuccess,l=n.isSubmissionUnsuccessful,p=n.isReachMaxSession,d=n.resetSubmitForm,f=(0,u.cI)({defaultValues:{customer_name:"",customer_issue:"",questionnaire:[],checksum:""}});return{form:f,handleSubmit:function(){var e;f.handleSubmit((e=(0,o.Z)(s().mark(function _callee(e){return s().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:i(_objectSpread(_objectSpread({},e),{},{customer_name:(0,m.ZP)(e.customer_name),customer_issue:(0,m.ZP)(e.customer_issue),questionnaire:e.questionnaire.filter(function(e){return e}).map(function(e,r){return _objectSpread(_objectSpread({},e),{},{order:r+1,answer:e.answer?(0,m.ZP)(e.answer):""})}),checksum:(null==t?void 0:t.checksum)||""}));case 2:case"end":return r.stop()}},_callee)})),function(r){return e.apply(this,arguments)}))()},isSubmittingForm:a,isSubmitSuccess:c,isSubmissionUnsuccessful:l,isReachMaxSession:p,resetSubmitForm:d}}},94932:function(e,r,t){"use strict";t.d(r,{UW:function(){return Download},th:function(){return s.t},bk:function(){return GetFormErrorState},B$:function(){return SubmitFormErrorState}});var n=t(28626),o=t(80996),i=t(35944),Download=function(e){var r=e.downloadPageKind,t=(0,o.KO)(),u=(0,o.sm)({downloadPageKind:r,supportSessionCode:t}),a=u.expiredDate,c=u.helpUrl,l=u.isCreatingPinCode,p=u.isDisableGetAppButton,d=u.isLoadingGetAppLink,m=u.linkForCopy,f=u.downloadUrl,b=u.pinCode,S=u.refreshPinCode;return(0,i.tZ)(s.t,{kind:r,downloadUrl:f,isDisableGetAppButton:p,isLoadingGetAppLink:d,helpLink:(0,i.tZ)(n.J0$,{variant:"hyperlink02",target:"_blank",href:c,children:c.replace(o.l4,"")}),pinCode:b,onRefreshPinCode:S,isRefreshingPinCode:l,expiredDate:a,linkForCopy:m})},s=t(16191),u=t(23100),a=t(90634),c=t(62670),GetFormErrorState=function(){var e=(0,c.$G)().t;return(0,i.tZ)(u.xu,{p:"56px",h:"480px",children:(0,i.BX)(a.g,{spacing:"8px",children:[(0,i.tZ)(n.siO,{color:"red.100"}),(0,i.tZ)(n.bd9,{color:"dark.80",children:e("support-forms:unavailable")}),(0,i.tZ)(n.rHc,{color:"neutral.300",children:e("support-forms:unavailableDescription")})]})})},SubmitFormErrorState=function(){var e=(0,c.$G)().t;return(0,i.tZ)(u.xu,{p:"56px",h:"480px",children:(0,i.BX)(a.g,{spacing:"8px",children:[(0,i.tZ)(n.siO,{color:"red.100"}),(0,i.tZ)(n.bd9,{color:"dark.80",children:e("support-forms:submitUnsuccessful")}),(0,i.tZ)(n.rHc,{color:"neutral.300",children:e("support-forms:submissionErrorNetwork")})]})})}},18193:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSP:function(){return w},default:function(){return g}});var n=t(59499),o=t(11163),i=t(7754),s=t(23100),u=t(62670),a=t(87536),c=t(15169),l=t(57235),p=t(94932),d=t(16974),m=t(88767),f=t(23757),b="not-found",useFormInIframe=function(e){var r=e.supportFormId,t=(0,m.useQuery)(["supportForm",r],function(){return(0,f.y7)(r)},{enabled:!!r&&r!==b});return{isLoadingForm:t.isLoading,formFields:t.data,isGetFormError:t.isError}},S=t(90701),h=t(10039),_=t(35944);function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var SupportFormDisplayPage=function(){var e=(0,u.$G)().t,r=(0,o.useRouter)().query.code,t=useFormInIframe({supportFormId:r}),n=t.isLoadingForm,s=t.formFields,m=t.isGetFormError,f=(0,d.W)({supportFormId:r,formFields:s}),w=f.form,g=f.handleSubmit,v=f.isSubmitSuccess,y=f.isSubmittingForm,O=f.isSubmissionUnsuccessful,F=f.isReachMaxSession,P=f.resetSubmitForm;return n?(0,_.tZ)(Wrapper,{children:(0,_.tZ)(i.M,{minH:"480px",children:(0,_.tZ)(h.g,{})})}):m||r===b?(0,_.tZ)(Wrapper,{children:(0,_.tZ)(p.bk,{})}):O?(0,_.tZ)(Wrapper,{children:(0,_.tZ)(p.B$,{})}):F?(0,_.tZ)(c.Cv,{size:"xs",isOpen:!0,message:e("support-forms:submissionErrorChannel"),onConfirm:P}):(0,_.tZ)(_.HY,{children:v?(0,_.tZ)(p.UW,{downloadPageKind:(null==s?void 0:s.download_page_kind)||S.J.SPLASHTOP_CLASSIC}):(0,_.tZ)(Wrapper,{children:(0,_.tZ)(a.RV,_objectSpread(_objectSpread({},w),{},{children:s&&(0,_.tZ)(h.I,{scenario:l.wV.endUser,formFields:s,onSubmit:g,isSubmittingForm:y})}))})})};SupportFormDisplayPage.skipAuth=!0,SupportFormDisplayPage.useNewTheme=!0;var w=!0,g=SupportFormDisplayPage,Wrapper=function(e){var r=e.children;return(0,_.tZ)(s.xu,{w:"100%",h:"100%",pt:"20px",pb:"12px",children:r})}},10039:function(e,r,t){"use strict";t.d(r,{I:function(){return Fields},g:function(){return SkeletonLoader}});var n=t(59499),o=t(67294),i=t(7754),s=t(23100),u=t(87536),a=t(28626),c=t(83137),l=t(90701),p=t(35944);function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var Fields=function(e){var r=e.scenario,t=e.formFields,n=e.onSubmit,s=e.isSubmittingForm,a=(0,u.Gc)(),d=a.register,m=a.formState.errors,f=a.setValue,isFieldError=function(e){var r,t;return!!(null===(r=m.questionnaire)||void 0===r?void 0:null===(t=r[e])||void 0===t?void 0:t.answer)};return(0,p.BX)(o.Fragment,{children:[t.questionnaire.map(function(e,t){switch(e.kind){case l.v.customerName:return(0,p.tZ)(o.Fragment,{children:(0,p.tZ)(c.$5,_objectSpread(_objectSpread({},d("customer_name",{required:e.required})),{},{scenario:r,labelValue:e.question,placeholder:e.placeholder,isRequired:e.required,isInvalid:!!m.customer_name}))},e.order);case l.v.customerIssue:return(0,p.tZ)(o.Fragment,{children:(0,p.tZ)(c.rJ,_objectSpread(_objectSpread({},d("customer_issue",{required:e.required})),{},{scenario:r,labelValue:e.question,placeholder:e.placeholder,isRequired:e.required,isInvalid:!!m.customer_issue}))},e.order);case l.v.shortAnswer:return f("questionnaire.".concat(t,".question"),e.question),(0,p.tZ)(o.Fragment,{children:(0,p.tZ)(c.m_,_objectSpread(_objectSpread({},d("questionnaire.".concat(t,".answer"),{required:e.required})),{},{scenario:r,labelValue:e.question,placeholder:e.placeholder,isRequired:e.required,isInvalid:isFieldError(t)}))},e.order);case l.v.paragraph:return f("questionnaire.".concat(t,".question"),e.question),(0,p.tZ)(o.Fragment,{children:(0,p.tZ)(c.Q1,_objectSpread(_objectSpread({},d("questionnaire.".concat(t,".answer"),{required:e.required})),{},{scenario:r,labelValue:e.question,placeholder:e.placeholder,isRequired:e.required,isInvalid:isFieldError(t)}))},e.order);case l.v.dropdown:return f("questionnaire.".concat(t,".question"),e.question),(0,p.tZ)(o.Fragment,{children:(0,p.tZ)(c.nG,{registerFieldName:"questionnaire.".concat(t,".answer"),defaultValue:e.default_option,options:e.options,scenario:r,labelValue:e.question,isRequired:e.required,isInvalid:isFieldError(t)})},e.order);default:return null}}),(0,p.tZ)(i.M,{py:"16px",children:(0,p.tZ)(c.Mm,{label:(null==t?void 0:t.action_button_label)||"",onClick:n,isLoading:void 0!==s&&s})})]})},SkeletonLoader=function(){return(0,p.tZ)(s.xu,{w:"100%",children:[,,,,,].fill(null).map(function(e,r){return(0,p.BX)(s.xu,{px:"36px",children:[(0,p.tZ)(a.lVt,{w:"95px",maxW:"100%",h:"18px",mb:"8px"}),(0,p.tZ)(a.lVt,{w:"480px",maxW:"100%",h:"40px",mb:"24px"})]},r)})})}},78906:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/w/form/[code]",function(){return t(18193)}])}},function(e){e.O(0,[9351,9774,2888,179],function(){return e(e.s=78906)}),_N_E=e.O()}]);
//# sourceMappingURL=[code]-45d0be5a984a4e0a.js.map